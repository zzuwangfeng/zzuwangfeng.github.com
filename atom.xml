<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[I'm JackWong]]></title>
  <link href="http://www.iluckly.com/atom.xml" rel="self"/>
  <link href="http://www.iluckly.com/"/>
  <updated>2014-04-08T16:45:51+08:00</updated>
  <id>http://www.iluckly.com/</id>
  <author>
    <name><![CDATA[Jack Wong]]></name>
    <email><![CDATA[zzu.jackwong@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[解决Octopress选装Greyshade主题Disqus失效的问题--深入了解jekyll模板]]></title>
    <link href="http://www.iluckly.com/blog/2014/04/08/jie-jue-octopressxuan-zhuang-greyshadezhu-ti-disqusshi-xiao-de-wen-ti-shen-ru-liao-jie-jekyllmo-ban/"/>
    <updated>2014-04-08T14:26:26+08:00</updated>
    <id>http://www.iluckly.com/blog/2014/04/08/jie-jue-octopressxuan-zhuang-greyshadezhu-ti-disqusshi-xiao-de-wen-ti-shen-ru-liao-jie-jekyllmo-ban</id>
    <content type="html"><![CDATA[<h3>问题描述</h3>

<hr />

<p>在寻找漂亮的Octopress主题的时候，发现了一个不错的theme – <a href="https://github.com/shashankmehta/greyshade">Greyshade</a>，按照Github页面上的提示进行安装：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone git@github.com:shashankmehta/greyshade.git .themes/greyshade
</span><span class='line'>$ echo "\$greyshade: color;" &gt;&gt; sass/custom/_colors.scss //Substitue 'color' with your highlight color
</span><span class='line'>$ rake "install[greyshade]"
</span><span class='line'>$ rake generate</span></code></pre></td></tr></table></div></figure>


<p><code>rakw preview</code>之后，发现Disqus的comment功能不见了，下面开始解决问题。Jekyll模板结构下面的内容是我对Jekyll结构的理解，当我们新建一个模板，下面主要有下面几个文件和目录：</p>

<p>_config.yml</p>

<p>全局的配置文件，可以控制一些<code>plugin</code>的开关，比如<code>Disqus</code>，<code>github</code>，<code>google+</code>等</p>

<pre><code>sass
</code></pre>

<p>里面是一堆的scss文件，负责页面UI区域规划，显示的颜色，文字排版等</p>

<pre><code>source
</code></pre>

<p>出去sass干的，剩下的比如页面内容的组织，逻辑等就是由这个控制</p>

<pre><code>source/_posts
</code></pre>

<p>其中这个文件夹存放的就是blog的<code>source</code>，blog的内容在这里面用编辑器编辑即可。</p>

<h3>解决Disqus无法工作的问题</h3>

<hr />

<p>首先查看了问题页面的源码，负责comment模块的代码如下</p>

<pre><code>&lt;section id="comment"&gt;
&lt;h1 class="title"&gt;Comments&lt;/h1&gt;
&lt;div id="disqus_thread" aria-live="polite"&gt;&lt;noscript&gt;Please enable JavaScript to view the &lt;a    href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;
&lt;/div&gt;
&lt;/section&gt;
</code></pre>

<p>这里没有执行任何的逻辑调用，查看了下这段代码位于<code>/includes/post/disqus_thread.html</code>中，而真正的需要的代码位于<code>/includes/disqus.html</code>中，这样问题就看<code>disqus</code>原来在哪里调用即可 查看完，发现原来的<code>classic theme</code>是把<code>disqus</code>调用放在<code>after_footer.html</code>中，这个在新主题内没有被任何文件调用，查看文件修改记录，在<code>_layouts/default.html</code>中<code>line 19</code>加入代码</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A year's plans in the spring]]></title>
    <link href="http://www.iluckly.com/blog/2014/04/02/a-years-plans-in-the-spring/"/>
    <updated>2014-04-02T16:52:54+08:00</updated>
    <id>http://www.iluckly.com/blog/2014/04/02/a-years-plans-in-the-spring</id>
    <content type="html"><![CDATA[<h3>大家好，我是JackWong！欢迎大家来到我的小站！</h3>

<p>一直想弄个bolg,由于时间问题,今天终于弄成了.由于git和<a href="http://en.wikipedia.org/wiki/Markdown">markdown</a>对我来说就是小白，所以搭建的时间断断续续持续了约一周。其实网上已经有很好的参考资料了，只要照着弄，很容易就能搭建好的。</p>

<p>这篇文章是第一篇，我用的<a href="http://en.wikipedia.org/wiki/Markdown">markdown</a>编辑器是<a href="http://www.mouapp.com">mou</a>，感觉不错。
下面是一些在mac机器上用octopress写博文需要用到的操作(持续更新)</p>

<p><strong>目录</strong></p>

<ul>
<li><p>发表并部署博文</p></li>
<li><p>添加多说评论功能</p></li>
<li><p>起草文章 暂不公开</p></li>
<li><p>域名解析</p></li>
<li><p>添加百度统计和google analytics</p></li>
</ul>


<h3>发表并部署博文</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake new_post["New Post"]
</span><span class='line'>$ rake generate
</span><span class='line'>$ git add .
</span><span class='line'>$ git commit -am "Some comment here." 
</span><span class='line'>$ git push origin source
</span><span class='line'>$ rake deploy</span></code></pre></td></tr></table></div></figure>


<h3>添加多说评论功能</h3>

<p><strong>A 获取</strong> <code>short_name</code></p>

<p>去多说网注册账号，获取站点的short_name</p>

<p><strong>B 在</strong> <code>_config.yml</code> <strong>文件中添加如下内容</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#duoshuo comments
</span><span class='line'>duoshuo_comments: true
</span><span class='line'>duoshuo_short_name: yourname</span></code></pre></td></tr></table></div></figure>


<p><strong>C 在</strong> <code>source/_layouts/post.html</code> <strong>中添加多说评论模块</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>｛% if site.duoshuo_short_name and site.duoshuo_comments == true and page.comments == true %｝
</span><span class='line'>  &lt;section&gt;
</span><span class='line'>    &lt;h1&gt;Comments&lt;/h1&gt;
</span><span class='line'>    &lt;div id="comments" aria-live="polite"&gt;｛% include post/duoshuo1.html %｝&lt;/div&gt;
</span><span class='line'>  &lt;/section&gt;
</span><span class='line'>｛% endif %｝</span></code></pre></td></tr></table></div></figure>


<p><strong>D 发布到站点</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake generate
</span><span class='line'>$ git add .
</span><span class='line'>$ git commit -am "添加多说评论" 
</span><span class='line'>$ git push origin source
</span><span class='line'>$ rake deploy</span></code></pre></td></tr></table></div></figure>


<h3>起草文章暂不公开</h3>

<p>在文章头部添加 <code>published: false</code> ，就能起到暂时不公开文章了(即使已经部署到了github中)，要公开文章只需要将false修改true即可。</p>

<h3>域名解析</h3>

<p>我们可以给GitHub上的page指定一个域名，具体做法如下2个步骤</p>

<p><strong>1、给repo配置域名</strong></p>

<p>在 <code>source</code> 根目录下新建一个名为<code>CNAME</code>的文件，并把你的域名填写进去，例如<code>iluckly.com</code>。这样做的目的是告诉GitHub服务器开始将repo中的page(例如<code>zzuwangfeng.github.io</code>)指向到某个域名中。</p>

<p><strong>2、配置DNS(我的域名是在godaddy上购买的)</strong>
添加一条A记录： <code>@ 204.232.175.78</code> 在CNAME中添加一条记录:<code>zzuwangfeng.github.com</code></p>

<h3>添加百度统计和google analytics</h3>

<p>从百度统计获取脚本，然后添加到文件s<code>ource/_includes/after_footer.html</code>文件中 从google analytics获取跟踪ID，然后将这个ID添加到<code>_config.yml</code>文件的<code>google_analytics_tracking_id</code>后面即可。</p>
]]></content>
  </entry>
  
</feed>
